local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
local Window = Rayfield:CreateWindow({
   Name = "tg: @sigmatik323",
   LoadingTitle = "tg: @sigmatik323",
   LoadingSubtitle = "by sigmatik323",
   ConfigurationSaving = {
      Enabled = true,
      FolderName = "sigmatik",
      FileName = "sigmatik_ui"
   },
   Discord = {
      Enabled = false,
      Invite = "noinvitelink",
      RememberJoins = false
   },
   KeySystem = false,
   KeySettings = {
      Title = "",
      Subtitle = "",
      Note = "",
      FileName = "",
      SaveKey = false,
      GrabKeyFromSite = false,
      Key = {}
   }
})

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local MainRemote = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("Knit"):WaitForChild("Services"):WaitForChild("RemotesService"):WaitForChild("RE"):WaitForChild("MainRemote")

local interval = 0.5
local toggles = {}

local function startLoop(key, args)
   if toggles[key] then return end
   toggles[key] = true
   coroutine.wrap(function()
      while toggles[key] do
         MainRemote:FireServer(unpack(args))
         task.wait(interval)
      end
   end)()
end

local function stopLoop(key)
   toggles[key] = false
end

local function Auto(tab, label, args)
   tab:CreateToggle({
      Name = label,
      CurrentValue = false,
      Callback = function(v)
         if v then
            startLoop(label, args)
         else
            stopLoop(label)
         end
      end
   })
end

local SettingsTab = Window:CreateTab("‚öôÔ∏è Settings")
SettingsTab:CreateSlider({
   Name = "Global Call Interval (s)",
   Range = {0.05, 3},
   Increment = 0.05,
   CurrentValue = interval,
   Callback = function(v)
      interval = v
   end
})

local SoulTab = Window:CreateTab("üåå Soul")
local FleshTab = Window:CreateTab("ü•© Flesh")
local CandyCornTab = Window:CreateTab("üç¨ Candy Corn")
local RefinedCandyTab = Window:CreateTab("üç≠ Refined Candy")
local FactorizedCandyTab = Window:CreateTab("üß© Factorized Candy")
local TreeTab = Window:CreateTab("üéÉ Area 2 Tree")

Auto(SoulTab, "Soul Tier Up", {"SoulTierUp"})
Auto(SoulTab, "Halloween Fleshify", {"HalloweenEvent_Fleshify"})

Auto(FleshTab, "Upgrade All: Flesh Multiplier", {"UpgradeAll","Flesh","Flesh Multiplier"})
Auto(FleshTab, "Upgrade All: Flesh Multiplier II", {"UpgradeAll","Flesh","Flesh Multiplier II"})
Auto(FleshTab, "Upgrade All: Mob Damage Multiplier", {"UpgradeAll","Flesh","Mob Damage Multiplier"})
Auto(FleshTab, "Upgrade All: Halloween Bulk", {"UpgradeAll","Flesh","Halloween Bulk"})
Auto(FleshTab, "Upgrade All: Halloween Luck", {"UpgradeAll","Flesh","Halloween Luck"})
Auto(FleshTab, "Upgrade All: Unlock Candy Corn", {"UpgradeAll","Flesh","Unlock Candy Corn"})
Auto(FleshTab, "Upgrade All: Candy Corn Multiplier III", {"UpgradeAll","Flesh","Candy Corn Multiplier III"})

Auto(CandyCornTab, "Upgrade All: Candy Corn Multiplier", {"UpgradeAll","Candy Corn","Candy Corn Multiplier"})
Auto(CandyCornTab, "Upgrade All: Candy Corn Multiplier II", {"UpgradeAll","Candy Corn","Candy Corn Multiplier II"})
Auto(CandyCornTab, "Upgrade All: Candy Cooldown", {"UpgradeAll","Candy Corn","Candy Cooldown"})
Auto(CandyCornTab, "Upgrade All: Candy Cooldown II", {"UpgradeAll","Candy Corn","Candy Cooldown II"})
Auto(CandyCornTab, "Upgrade All: Candy Corn Capacity", {"UpgradeAll","Candy Corn","Candy Corn Capacity"})
Auto(CandyCornTab, "Upgrade All: Candy Corn Zone Size", {"UpgradeAll","Candy Corn","Candy Corn Zone Size"})
Auto(CandyCornTab, "Upgrade All: Halloween Bulk II", {"UpgradeAll","Candy Corn","Halloween Bulk II"})
Auto(CandyCornTab, "Upgrade All: Halloween Luck II", {"UpgradeAll","Candy Corn","Halloween Luck II"})
Auto(CandyCornTab, "Upgrade All: Flesh Multiplier III", {"UpgradeAll","Candy Corn","Flesh Multiplier III"})
Auto(CandyCornTab, "Upgrade All: Candy Mutation Chance", {"UpgradeAll","Candy Corn","Candy Mutation Chance"})
Auto(CandyCornTab, "Upgrade All: Refined Candy Multiplier IV", {"UpgradeAll","Candy Corn","Refined Candy Multiplier IV"})
Auto(CandyCornTab, "Upgrade All: Factorized Candy Multiplier IV", {"UpgradeAll","Candy Corn","Factorized Candy Multiplier IV"})

Auto(RefinedCandyTab, "Upgrade All: Refined Candy Multiplier", {"UpgradeAll","Refined Candy","Refined Candy Multiplier"})
Auto(RefinedCandyTab, "Upgrade All: Refined Candy Multiplier II", {"UpgradeAll","Refined Candy","Refined Candy Multiplier II"})
Auto(RefinedCandyTab, "Upgrade All: Candy Corn Multiplier IV", {"UpgradeAll","Refined Candy","Candy Corn Multiplier IV"})
Auto(RefinedCandyTab, "Upgrade All: Flesh Multiplier IV", {"UpgradeAll","Refined Candy","Flesh Multiplier IV"})
Auto(RefinedCandyTab, "Upgrade All: Halloween Bulk III", {"UpgradeAll","Refined Candy","Halloween Bulk III"})
Auto(RefinedCandyTab, "Upgrade All: Halloween Luck III", {"UpgradeAll","Refined Candy","Halloween Luck III"})
Auto(RefinedCandyTab, "Upgrade All: Unlock Factorized Candy", {"UpgradeAll","Refined Candy","Unlock Factorized Candy"})
Auto(RefinedCandyTab, "Upgrade All: Factorized Candy Multiplier III", {"UpgradeAll","Refined Candy","Factorized Candy Multiplier III"})

Auto(FactorizedCandyTab, "Upgrade All: Factorized Candy Multiplier II", {"UpgradeAll","Factorized Candy","Factorized Candy Multiplier II"})
Auto(FactorizedCandyTab, "Upgrade All: Factorized Candy Capacity", {"UpgradeAll","Factorized Candy","Factorized Candy Capacity"})
Auto(FactorizedCandyTab, "Upgrade All: Factorized Candy Multiplier", {"UpgradeAll","Factorized Candy","Factorized Candy Multiplier"})
Auto(FactorizedCandyTab, "Upgrade All: Factorized Candy Speed", {"UpgradeAll","Factorized Candy","Factorized Candy Speed"})
Auto(FactorizedCandyTab, "Upgrade All: Factorized Candy Rate", {"UpgradeAll","Factorized Candy","Factorized Candy Rate"})
Auto(FactorizedCandyTab, "Upgrade All: Refined Candy Multiplier V", {"UpgradeAll","Factorized Candy","Refined Candy Multiplier V"})
Auto(FactorizedCandyTab, "Upgrade All: Candy Corn Multiplier V", {"UpgradeAll","Factorized Candy","Candy Corn Multiplier V"})
Auto(FactorizedCandyTab, "Upgrade All: Unlock Soul Collapse", {"UpgradeAll","Factorized Candy","Unlock Soul Collapse"})

Auto(TreeTab, "UpgradeTree: Candy Corn", {"UpgradeTree","Halloween Event_Area2_Candy Corn"})
Auto(TreeTab, "UpgradeTree: Refined Candy", {"UpgradeTree","Halloween Event_Area2_Refined Candy"})
Auto(TreeTab, "UpgradeTree: Flesh", {"UpgradeTree","Halloween Event_Area2_Flesh"})
Auto(TreeTab, "UpgradeTree: Factorized Candy Capacity", {"UpgradeTree","Halloween Event_Area2_Factorized Candy Capacity"})
Auto(TreeTab, "UpgradeTree: Factorized Candy", {"UpgradeTree","Halloween Event_Area2_Factorized Candy"})
Auto(TreeTab, "UpgradeTree: Candy Corn 2", {"UpgradeTree","Halloween Event_Area2_Candy Corn 2"})
Auto(TreeTab, "UpgradeTree: Factorized Candy Rate", {"UpgradeTree","Halloween Event_Area2_Factorized Candy Rate"})
Auto(TreeTab, "UpgradeTree: Factorized Candy Speed", {"UpgradeTree","Halloween Event_Area2_Factorized Candy Speed"})
Auto(TreeTab, "UpgradeTree: Halloween Event Luck", {"UpgradeTree","Halloween Event_Area2_Halloween Event Luck"})
Auto(TreeTab, "UpgradeTree: Mob Damage", {"UpgradeTree","Halloween Event_Area2_Mob Damage"})
Auto(TreeTab, "UpgradeTree: Unlock Boss", {"UpgradeTree","Halloween Event_Area2_Unlock Boss"})
Auto(TreeTab, "UpgradeTree: Mob Damage 2", {"UpgradeTree","Halloween Event_Area2_Mob Damage 2"})
Auto(TreeTab, "UpgradeTree: Halloween Bulk", {"UpgradeTree","Halloween Event_Area2_Halloween Bulk"})
Auto(TreeTab, "UpgradeTree: Boss Damage", {"UpgradeTree","Halloween Event_Area2_Boss Damage"})
Auto(TreeTab, "UpgradeTree: Flesh 2", {"UpgradeTree","Halloween Event_Area2_Flesh 2"})
Auto(TreeTab, "UpgradeTree: Halloween Event Luck 2", {"UpgradeTree","Halloween Event_Area2_Halloween Event Luck 2"})
Auto(TreeTab, "UpgradeTree: Halloween Bulk 2", {"UpgradeTree","Halloween Event_Area2_Halloween Bulk 2"})
Auto(TreeTab, "UpgradeTree: Boss Damage 2", {"UpgradeTree","Halloween Event_Area2_Boss Damage 2"})
Auto(TreeTab, "UpgradeTree: Factorized Candy 2", {"UpgradeTree","Halloween Event_Area2_Factorized Candy 2"})
Auto(TreeTab, "UpgradeTree: Common Mob Drops", {"UpgradeTree","Halloween Event_Area2_Common Mob Drops"})

local InspectTab = Window:CreateTab("üîç Inspect")
local Mouse = LocalPlayer:GetMouse()
local inspectGui = LocalPlayer:WaitForChild("PlayerGui"):FindFirstChild("sigmatik_Inspect") or Instance.new("ScreenGui")
if not inspectGui.Parent then
   inspectGui.Name = "sigmatik_Inspect"
   inspectGui.ResetOnSpawn = false
   inspectGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
end
local pathLabel = inspectGui:FindFirstChild("PathLabel") or Instance.new("TextLabel")
pathLabel.Name = "PathLabel"
pathLabel.Size = UDim2.new(1, -40, 0, 28)
pathLabel.Position = UDim2.new(0, 20, 0, 20)
pathLabel.BackgroundColor3 = Color3.fromRGB(15,15,18)
pathLabel.BackgroundTransparency = 0.15
pathLabel.TextColor3 = Color3.new(1,1,1)
pathLabel.Font = Enum.Font.Gotham
pathLabel.TextSize = 14
pathLabel.TextXAlignment = Enum.TextXAlignment.Left
pathLabel.Text = ""
pathLabel.Visible = false
pathLabel.Parent = inspectGui
if not pathLabel:FindFirstChild("UICorner") then
   local c = Instance.new("UICorner")
   c.CornerRadius = UDim.new(0,12)
   c.Parent = pathLabel
end
if not pathLabel:FindFirstChild("UIStroke") then
   local s = Instance.new("UIStroke")
   s.Thickness = 1
   s.Transparency = 0.25
   s.Parent = pathLabel
end
local stepConn
local activeHighlight
local lastModel
local pulse = 0
local function enableInspect()
   if stepConn then return end
   stepConn = RunService.RenderStepped:Connect(function(dt)
      pulse = pulse + dt
      local target = Mouse.Target
      if target and target:IsA("BasePart") then
         local m = target:FindFirstAncestorOfClass("Model") or target
         if m ~= lastModel then
            if activeHighlight then activeHighlight:Destroy() end
            local h = Instance.new("Highlight")
            h.FillTransparency = 0.55
            h.OutlineTransparency = 0
            h.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
            h.Parent = m
            activeHighlight = h
            lastModel = m
         end
         pathLabel.Visible = true
         pathLabel.Text = target:GetFullName()
         if activeHighlight then
            local v = 0.8 + 0.2*math.sin(pulse*3)
            activeHighlight.FillColor = Color3.fromHSV(0.1, 0.6, v)
            activeHighlight.OutlineColor = Color3.fromRGB(255,255,255)
         end
      else
         pathLabel.Visible = false
         lastModel = nil
         if activeHighlight then activeHighlight:Destroy() activeHighlight = nil end
      end
   end)
end
local function disableInspect()
   if stepConn then stepConn:Disconnect() stepConn = nil end
   if activeHighlight then activeHighlight:Destroy() activeHighlight = nil end
   pathLabel.Visible = false
   lastModel = nil
end
InspectTab:CreateToggle({
   Name = "Inspect",
   CurrentValue = false,
   Callback = function(v)
      if v then
         enableInspect()
      else
         disableInspect()
      end
   end
})

local AutoMobTab = Window:CreateTab("‚öîÔ∏è Auto Farm Mobs")
local Content = workspace:WaitForChild("__GAME_CONTENT")
local MobsRoot = Content:WaitForChild("Mobs"):WaitForChild("Halloween")
local mobEnabled = {}
local mobThreads = {}
local createdToggles = {}
local mobState = {}
local function targetPart(m)
   if not m or not m.Parent then return nil end
   local h = m:FindFirstChild("Hitbox")
   if h and h:IsA("BasePart") then return h end
   local c = m:FindFirstChild("Character")
   if c and c:IsA("Model") then
      return c:FindFirstChild("HumanoidRootPart") or c.PrimaryPart
   end
   return m.PrimaryPart
end
local function nextMobWithCharacter(name, prev)
   local matches = {}
   for _,child in ipairs(MobsRoot:GetChildren()) do
      if child.Name == name and child:FindFirstChild("Character") then
         table.insert(matches, child)
      end
   end
   if #matches == 0 then return nil end
   if not prev then return matches[1] end
   local idx = 1
   for i,m in ipairs(matches) do
      if m == prev then
         idx = (i % #matches) + 1
         break
      end
   end
   return matches[idx]
end
local function startMob(name)
   if mobThreads[name] then return end
   mobEnabled[name] = true
   mobState[name] = mobState[name] or {current=nil}
   mobThreads[name] = coroutine.wrap(function()
      while mobEnabled[name] do
         local char = LocalPlayer.Character
         local hrp = char and char:FindFirstChild("HumanoidRootPart")
         if hrp then
            local cur = mobState[name].current
            if not cur or not cur.Parent or not cur:FindFirstChild("Character") then
               cur = nextMobWithCharacter(name, cur)
               mobState[name].current = cur
            end
            local t = targetPart(cur)
            if t then
               hrp.AssemblyLinearVelocity = Vector3.zero
               hrp.CFrame = t.CFrame * CFrame.new(0,0,3)
            end
         end
         task.wait(interval)
      end
   end)
   mobThreads[name]()
end
local function stopMob(name)
   mobEnabled[name] = false
   mobThreads[name] = nil
   if mobState[name] then mobState[name].current = nil end
end
local function buildMobList()
   for _,mob in ipairs(MobsRoot:GetChildren()) do
      if mob:IsA("Model") and mob:FindFirstChild("Character") and not createdToggles[mob.Name] then
         createdToggles[mob.Name] = true
         AutoMobTab:CreateToggle({
            Name = "Auto Farm: "..mob.Name,
            CurrentValue = false,
            Callback = function(v)
               if v then startMob(mob.Name) else stopMob(mob.Name) end
            end
         })
      end
   end
end
AutoMobTab:CreateButton({Name = "Refresh Mobs", Callback = buildMobList})
AutoMobTab:CreateButton({Name = "Stop All", Callback = function()
   for n in pairs(mobEnabled) do
      mobEnabled[n] = false
      mobThreads[n] = nil
      if mobState[n] then mobState[n].current = nil end
   end
end})
buildMobList()

local ZoneTab = Window:CreateTab("üì¶ Zone Collect")
local zoneEnabled = false
local function getZonePart()
   local model = workspace:FindFirstChild(LocalPlayer.Name)
   if not model then return nil end
   return model:FindFirstChild("CollectingAreaClient")
end
local initPart = getZonePart()
local zoneX = initPart and initPart.Size.X or 10
local zoneZ = initPart and initPart.Size.Z or 10
local function applyZoneSize()
   local p = getZonePart()
   if p then
      local y = p.Size.Y
      p.Size = Vector3.new(zoneX, y, zoneZ)
   end
end
ZoneTab:CreateToggle({
   Name = "Zone Collect",
   CurrentValue = false,
   Callback = function(v)
      zoneEnabled = v
      if v then applyZoneSize() end
   end
})
ZoneTab:CreateSlider({
   Name = "Size X",
   Range = {1, 1000},
   Increment = 1,
   CurrentValue = zoneX,
   Callback = function(v)
      zoneX = v
      if zoneEnabled then applyZoneSize() end
   end
})
ZoneTab:CreateSlider({
   Name = "Size Z",
   Range = {1, 1000},
   Increment = 1,
   CurrentValue = zoneZ,
   Callback = function(v)
      zoneZ = v
      if zoneEnabled then applyZoneSize() end
   end
})
RunService.Heartbeat:Connect(function()
   if zoneEnabled then
      applyZoneSize()
   end
end)
